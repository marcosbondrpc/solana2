<?xml version="1.0"?>
<clickhouse>
    <logger>
        <level>information</level>
        <console>true</console>
    </logger>

    <http_port>8123</http_port>
    <tcp_port>9000</tcp_port>
    <interserver_http_port>9009</interserver_http_port>

    <max_connections>4096</max_connections>
    <keep_alive_timeout>3</keep_alive_timeout>
    <max_concurrent_queries>1000</max_concurrent_queries>

    <uncompressed_cache_size>8589934592</uncompressed_cache_size>
    <mark_cache_size>5368709120</mark_cache_size>

    <max_table_size_to_drop>0</max_table_size_to_drop>
    <max_partition_size_to_drop>0</max_partition_size_to_drop>

    <merge_tree>
        <max_suspicious_broken_parts>5</max_suspicious_broken_parts>
        <max_parts_in_total>100000</max_parts_in_total>
        <max_bytes_to_merge_at_max_space_in_pool>161061273600</max_bytes_to_merge_at_max_space_in_pool>
        <max_bytes_to_merge_at_min_space_in_pool>1048576</max_bytes_to_merge_at_min_space_in_pool>
        <parts_to_throw_insert>3000</parts_to_throw_insert>
        <parts_to_delay_insert>1500</parts_to_delay_insert>
        <max_delay_to_insert>10</max_delay_to_insert>
    </merge_tree>

    <kafka>
        <debug>
            <auto>false</auto>
            <kafka>false</kafka>
        </debug>
        <auto_offset_reset>earliest</auto_offset_reset>
    </kafka>

    <distributed_ddl>
        <path>/clickhouse/task_queue/ddl</path>
    </distributed_ddl>

    <profiles>
        <default>
            <max_memory_usage>16000000000</max_memory_usage>
            <max_memory_usage_for_user>16000000000</max_memory_usage_for_user>
            <max_bytes_before_external_group_by>8000000000</max_bytes_before_external_group_by>
            <max_bytes_before_external_sort>8000000000</max_bytes_before_external_sort>
            <max_execution_time>3600</max_execution_time>
            <max_block_size>100000</max_block_size>
            <max_insert_block_size>1000000</max_insert_block_size>
            <min_insert_block_size_rows>1000000</min_insert_block_size_rows>
            <min_insert_block_size_bytes>100000000</min_insert_block_size_bytes>
            <max_threads>16</max_threads>
            <background_pool_size>32</background_pool_size>
            <background_move_pool_size>8</background_move_pool_size>
            <background_fetches_pool_size>16</background_fetches_pool_size>
            <async_insert>1</async_insert>
            <async_insert_threads>16</async_insert_threads>
            <async_insert_max_data_size>10000000</async_insert_max_data_size>
            <wait_for_async_insert>0</wait_for_async_insert>
        </default>
    </profiles>
</clickhouse>